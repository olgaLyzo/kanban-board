{"ast":null,"code":"import{useEffect,useState}from\"react\";import{TaskContext}from'../contexts/task-context';import{jsx as _jsx}from\"react/jsx-runtime\";export const TaskProvider=props=>{const[tasks,setTasks]=useState([]);const[isLoaded,setLoaded]=useState(false);const[idCounter,setIdCounter]=useState(0);const[states]=useState([{id:1,name:'backlog',state:'backlog'},{id:2,name:'ready',state:'ready'},{id:3,name:'in progress',state:'inProgress'},{id:4,name:'finished',state:'finished'}]);const findTaskById=id=>tasks.find(task=>task.id===parseInt(id));useEffect(()=>{if(isLoaded){localStorage.setItem('tasks',JSON.stringify(tasks));}},[isLoaded,tasks]);useEffect(()=>{const tasks=localStorage.getItem('tasks');if(tasks){setTasks(JSON.parse(tasks));}setLoaded(true);},[]);const context={states,addTask:name=>{const id=idCounter+1;const task={id,name,state:'backlog'};setIdCounter(id);setTasks([...tasks,task]);// console.log('testAddTask:',idCounter, task.state)\n},updateTask:item=>{const task=findTaskById(item.id);task.name=item.name;task.description=item.description;setTasks([...tasks]);},removeTask:id=>{const task=findTaskById(id);if(task){setTasks([...tasks.filter(item=>item.id!==task.id)]);}},getTaskById:findTaskById,getTasksByState:state=>{return tasks.filter(task=>task.state===state);},getTasksByExcludedState:state=>{return tasks.filter(task=>task.state!==state);},moveTask:(id,state)=>{console.log('входные:',id,state);const task=findTaskById(id);if(task){task.state=state;console.log('task-state:',task.state);}setTasks([...tasks]);console.log(...tasks);},getActiveTasksCount:()=>{return tasks.filter(task=>task.state==='inProgress'||task.state==='ready').length;},getFinishedTasksCount:()=>{return tasks.filter(task=>task.state==='finished').length;}};return/*#__PURE__*/_jsx(TaskContext.Provider,{value:context,children:isLoaded&&props.children});};","map":{"version":3,"names":["useEffect","useState","TaskContext","jsx","_jsx","TaskProvider","props","tasks","setTasks","isLoaded","setLoaded","idCounter","setIdCounter","states","id","name","state","findTaskById","find","task","parseInt","localStorage","setItem","JSON","stringify","getItem","parse","context","addTask","updateTask","item","description","removeTask","filter","getTaskById","getTasksByState","getTasksByExcludedState","moveTask","console","log","getActiveTasksCount","length","getFinishedTasksCount","Provider","value","children"],"sources":["/Users/olyalyzo/projects/hvvjhvhk/src/contexts/task-provider.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { TaskContext } from '../contexts/task-context';\n\nexport const TaskProvider = (props)=>{\n\t\n\tconst [tasks, setTasks] = useState([]);\n\tconst [isLoaded, setLoaded] = useState(false);\n\tconst [idCounter, setIdCounter] = useState(0);\n\t\n\tconst [states] = useState([\n\t\t  {id: 1, name: 'backlog', state: 'backlog'},\n      {id: 2, name: 'ready', state: 'ready'},\n      {id: 3, name: 'in progress', state: 'inProgress'},\n\t\t\t{id: 4, name: 'finished', state: 'finished'},\n  ]);\n\n\tconst findTaskById = (id) => tasks.find(task => task.id === parseInt(id));\n\t\n\tuseEffect(()=>{\n\t\tif(isLoaded){\n\t\t\tlocalStorage.setItem('tasks', JSON.stringify(tasks));\n\t\t}\n\t},[isLoaded, tasks]);\n\n\tuseEffect(()=>{\n\t\tconst tasks = localStorage.getItem('tasks');\n\t\tif(tasks){\n\t\t\tsetTasks(JSON.parse(tasks));\n\t\t}\n\t\tsetLoaded(true);\n\t},[])\n\n\tconst context = {\n\t\tstates,\n\t\taddTask: (name)=>{\n\t\t\tconst id = idCounter + 1;\n\t\t  const task = {\n\t\t\t\tid, \n\t\t\t\tname, \n\t\t\t\tstate: 'backlog'\n\t\t\t};\n\t\t\tsetIdCounter(id);\n\t\t\tsetTasks([...tasks, task]);\n\t\t\t// console.log('testAddTask:',idCounter, task.state)\n\t\t},\n\t\tupdateTask: (item)=>{\n\t\t\tconst task = findTaskById(item.id);\n\t\t\ttask.name = item.name;\n\t\t\ttask.description = item.description;\n\t\t\tsetTasks([...tasks]);\n\t\t},\n\t\tremoveTask: (id)=>{\n\t\t\tconst task = findTaskById(id);\n\t\t\tif(task){\n\t\t\t\tsetTasks([...tasks.filter(item => \n\t\t\t\t\titem.id !== task.id\n\t\t\t\t\t)]);\n\t\t\t}\n\t\t},\n\t\tgetTaskById: findTaskById,\n\t\tgetTasksByState: (state)=>{\n\t\t\treturn tasks.filter(task => task.state === state);\n\t\t},\n\t\tgetTasksByExcludedState: (state)=>{\n\t\t\treturn tasks.filter(task => task.state !== state);\n\t\t},\n\t\tmoveTask: (id, state)=>{\n\t\t\tconsole.log('входные:', id, state);\n\t\t\tconst task = findTaskById(id);\n\t\t\tif(task){\n\t\t\t\ttask.state = state;\n\t\t\t\tconsole.log('task-state:', task.state);\n\t\t\t}\n\t\t\tsetTasks([...tasks]);\n\t\t\tconsole.log(...tasks)\n\t\t},\n\t\tgetActiveTasksCount: ()=>{\n\t\t\treturn tasks.filter(task => task.state === 'inProgress' || task.state === 'ready').length;\n\t\t},\n\t\tgetFinishedTasksCount: ()=>{\n\t\t\treturn tasks.filter(task => task.state === 'finished').length;\n\t\t}\n\t};\n\n\treturn (\n\t\t<TaskContext.Provider value={context}>\n\t\t\t\t{isLoaded && props.children}\n\t\t</TaskContext.Provider>\n\t)\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}